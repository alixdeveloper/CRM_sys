<!DOCTYPE html>
<html lang="ru">
<head>
    {% load static %}
    <link rel="icon" sizes="192x192" href="{% static 'main/images/'%}favicon.png">
    <script>document.documentElement.setAttribute('data-theme', "{{ theme }}");
    if ("{{ theme }}" == "dark") {
        var checkbox = document.querySelector('.theme-switch__checkbox');
        var themetab = document.createElement('meta');
        themetab.setAttribute('name',"theme-color");
        themetab.setAttribute('content',"#222");
        document.getElementsByTagName('head')[0].appendChild(theme);

    }


    </script>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
         a, a:hover,a:visited, a:focus {
    text-decoration:none;
}


        html {
        font-family: Roboto, sans-serif;
        --primary-color: #2f80ed;
        --secondary-color: #333333;
        --bg-color: #ffffff;
        --border: #dee2e6;
        --separate: #ced4da;


    }
.table-scroll-vertical{
    height: 350px;
    overflow: auto;

}
    html[data-theme='dark'] {
        --primary-color: #3498db;
        --secondary-color: #ffffff;
        --bg-color: #303030;
        --background: #222;
        --border: #222;
        --background-form: #444;
        --separate: #303030;
    }
    .card{
        background-color: var(--bg-color) !important;
    }
    .innercard{
        background-color: var(--background-form)!important;
    }
    .btn-secondary{
        background-color: var(--background-form) !important;

    }
    .btn-secondary:not(:disabled):not(.disabled).active{
        background-color: var(--primary-color) !important;
    }
    .custom-file-label, .custom-file-label::after{
        background-color: var(--background-form);
        color: var(--secondary-color);
    }
    .custom-file-label::after{
        content: 'Выбрать';
        border-left: 1px solid var(--separate);
    }

    *{
        border-color: var(--border)!important;
    }
    .navbar-brand {
        color: var(--secondary-color) !important;
    }

    body {
        background-color: var(--background);
    }

    input, select, textarea {
        color: var(--secondary-color) !important;
        background-color: var(--background-form) !important;
    }

    * {
        color: var(--secondary-color);
    }

    button:active, button:focus {
        outline: none;
    }

    .nav-link {
        color: var(--secondary-color) !important;
    }

    nav {
        background-color: var(--bg-color) !important;
    }

    .bg-light {
        background-color: var(--bg-color) !important;

    }

    h1 {
        color: var(--primary-color);
        margin-bottom: 0.25em;
    }

    h2 {
        color: var(--secondary-color);
        margin-top: 0;
    }

    h3 {
        color: var(--primary-color);
    }

    a {
        color: var(--primary-color);
    }

    section {
        margin-bottom: 3em;
        position: relative;
    }

    .cv {
        max-width: 900px;
        margin: 0 auto;
    }

    .contacts {
        margin-bottom: 2em;
    }

    .contact {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
    }

    .contact__type {
        min-width: 90px;
    }

    .experience {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        margin-bottom: 2em;
    }

    .experience__date {
        min-width: 185px;
        margin-bottom: 1em;
    }

    .experience__name {
        font-weight: bold;
    }

    @media (max-width: 575px) {
        .experience {
            display: block;
        }
    }

    /*.theme-switch-wrapper {*/
    /*  position: absolute;*/
    /*  right: 0;*/
    /*  top: 0;*/
    /*}*/

    .theme-switch-wrapper {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
    }

    .theme-switch-wrapper em {
        margin-left: 10px;
    }

    .theme-switch-wrapper .theme-switch__label {
        margin-left: 10px;
    }

    .theme-switch {
        display: inline-block;
        height: 34px;
        position: relative;
        width: 60px;
    }

    .theme-switch input {
        display: none;
    }

    .slider {
        background-color: #ccc;
        bottom: 0;
        cursor: pointer;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        -webkit-transition: .4s;
        transition: .4s;
    }

    .slider:before {
        background-color: #fff;
        bottom: 4px;
        content: "";
        height: 26px;
        left: 4px;
        position: absolute;
        -webkit-transition: .4s;
        transition: .4s;
        width: 26px;
    }

    input:checked + .slider {
        background-color: var(--primary-color);
    }

    input:checked + .slider:before {
        -webkit-transform: translateX(26px);
        transform: translateX(26px);
    }

    .slider.round {
        border-radius: 34px;
    }

    .slider.round:before {
        border-radius: 50%;
    }

    html.transition,
    html.transition * {
        -webkit-transition: all 750ms !important;
        transition: all 750ms !important;
        -webkit-transition-delay: 0 !important;
        transition-delay: 0 !important;
    }

    /*# sourceMappingURL=main.css.map */</style>
</head>
<body>
{% load login_check %}

<nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="/" style="padding-top:0!important;">Главная</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
            <table class="menu">
                <tr>
                    <td><a class="nav-item nav-link" href="/create_order">Новый заказ</a></td>

                    <td align="right" style="text-align: right!important;">
                        <div class="theme-switch-wrapper" style="display: inline; text-align: right!important;">
                            <label class="theme-switch" style="margin:0!important; margin-top: 5px!important;">
                                <input type="checkbox" class="theme-switch__checkbox"/>
                                <div class="slider round"></div>
                            </label>
                        </div>
                    </td>
                </tr>
                                  {% if request|login_check %}<tr> <td>
                    <a class="nav-item nav-link" href="/logout">Выйти</a></td>
</tr>                    {% endif %}

            </table>
        </div>
        <div class="navbar-nav">
        </div>
    </div>
</nav>
<script>
    if ("{{ theme }}" == "dark") {
        var checkbox = document.querySelector('.theme-switch__checkbox');
        checkbox.checked = true;
    }
</script>
{% block content %}
{% endblock %}
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript"> window.CSRF_TOKEN = "{{ csrf_token }}"; </script>
<script>var checkbox = document.querySelector('.theme-switch__checkbox');

checkbox.addEventListener('change', function () {
    transition();

    if (this.checked) {
        var theme = "dark";

    } else {
        var theme = 'light';

    }
    $.ajax({
        type: 'POST',
        url: "/status",
        data: {csrfmiddlewaretoken: window.CSRF_TOKEN, theme: theme},
        success: function (data) {
            if (theme == 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        }
    })

})

function transition() {
    document.documentElement.classList.add('transition');
    setTimeout(function () {
        document.documentElement.classList.remove('transition');
    }, 2500)
}</script>

<script>      $.ajax({
    type: 'GET',
    url: "/status",
    data: {csrfmiddlewaretoken: window.CSRF_TOKEN},
    success: function (data) {
        if (data == 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        } else {
            document.documentElement.setAttribute('data-theme', 'light');
        }
    }
})</script>

</body>
</html>